<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <title><%= game.name %> | GameMatch</title>
<%- include('../partials/header') %>
    <div class="container flex-grow-1">
        <div class="gameInfo my-5 text-center text-light justify-content-center">
            <img src="<%= game.image %>" alt="<%= game.name %> poster" class="gameImg mw-100 gameInfo-left">
            <div class="ml-lg-4 mt-4 align-self-end text-left gameInfo-right">
                <span class="h1"><%= game.name %></span>
                <div class="text-left mt-2 mb-4 d-inline-flex flex-wrap">
                    <span class="my-1">Tags: </span>
                    <% game.tags.forEach(tag => { %>
                        <span class="tag py-1 px-2 mx-1 my-1"><%= tag.name %></span>
                    <% }); %>
                </div>
                <form class="mt-3" action="/games/<%= game._id %>/create">
                    <button type="submit" class="btn1">Create post</button>
                </form>
            </div>
        </div>
        <div id="posts" class="mb-5 text-light">
            <% if (posts.length != 0) { %>
                <% posts.forEach(post => { %>
                    <div class="card1 px-3 px-sm-5 py-4 mb-4 shadow-sm">
                        <h2><a class="postTitle" href="/games/<%= game._id %>/posts/<%= post._id %>" style="overflow-wrap: break-word;"><%= post.title %></a></h2>
                        <small class="mb-1">Posted by <span class="author"><%= post.author.username %> </span>| Tags: 
                            <% if(post.tags === undefined || post.tags.length == 0){ %>
                                <span class="">None</span>
                            <% } %>
                            <% post.tags.forEach(tag => { %>
                                <span class="tag py-1 px-2"><%=tag.name %></span>
                            <% }); %></p>
                        </small>
                        <p><%= post.description %></p>
                    </div>
                <% }) %>
            <% } else { %>
                <div class="card p-4">
                    <p class="text-center">No posts yet.</p>
                </div>
            <% } %>
        </div>
    </div>
<%- include('../partials/footer') %>
